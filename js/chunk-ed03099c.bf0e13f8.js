(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed03099c"],{"00b4":function(e,t,c){"use strict";c("ac1f");var a=c("23e7"),o=c("da84"),n=c("c65b"),r=c("e330"),l=c("1626"),s=c("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=o.Error,u=r(/./.test);a({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!l(t))return u(this,e);var c=n(t,this,e);if(null!==c&&!s(c))throw new d("RegExp exec method returned something other than an Object or null");return!!c}})},"0b42":function(e,t,c){var a=c("da84"),o=c("e8b5"),n=c("68ee"),r=c("861d"),l=c("b622"),s=l("species"),i=a.Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,n(t)&&(t===i||o(t.prototype))?t=void 0:r(t)&&(t=t[s],null===t&&(t=void 0))),void 0===t?i:t}},"0d9f":function(e,t,c){"use strict";c.r(t);c("b0c0"),c("b64b");var a=c("7a23"),o=Object(a["createStaticVNode"])('<div class="container mt-7"><div class="row row-cols-3 row-cols-sm-3"><div class="col text-center"><div class="check-step check-step-finished d-flex flex-column justify-content-center"><i class="bi bi-check2-circle check-step-icon"></i><span>STEP 1</span><span>確認訂單</span></div></div><div class="col text-center"><div class="check-step d-flex flex-column justify-content-center"><i class="bi bi-dash-circle-dotted check-step-icon"></i><span>STEP 2</span><span>建立訂單</span></div></div><div class="col text-center"><div class="check-step d-flex flex-column justify-content-center"><i class="bi bi-dash-circle-dotted check-step-icon"></i><span>STEP 3</span><span>完成訂單</span></div></div></div></div>',1),n={class:"container my-7"},r={class:"row"},l={class:"col-12 col-md-6 pe-md-5"},s=Object(a["createElementVNode"])("h3",{class:"mb-3 fw-bold"},"確認訂單內容",-1),i={class:"table align-middle"},d=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",{class:"order-table-100"}),Object(a["createElementVNode"])("th",{class:"order-table-150"},"品名"),Object(a["createElementVNode"])("th",{class:"text-center order-table-150"},"單價")])],-1),u={class:"py-3"},m=Object(a["createElementVNode"])("br",null,null,-1),b={class:"text-center py-3"},f={colspan:"4",class:"text-end"},p={colspan:"4"},O={class:"input-group my-3 input-group-sm"},j={class:"input-group-append"},h=["disabled"],v={key:0},V={colspan:"4",class:"text-end text-danger fw-bolder fs-4"},N={class:"col-12 col-md-6 ps-md-5 justify-content-center"},E=Object(a["createElementVNode"])("h3",{class:"mb-3 fw-bold"},[Object(a["createTextVNode"])("填寫訂購資訊"),Object(a["createElementVNode"])("span",{class:"form-note"}," (標註 * 為必填資訊)")],-1),g={class:"mb-3"},x=Object(a["createElementVNode"])("label",{for:"email",class:"form-label"},[Object(a["createTextVNode"])("Email"),Object(a["createElementVNode"])("span",{class:"form-note"},"*")],-1),y={class:"mb-3"},w=Object(a["createElementVNode"])("label",{for:"name",class:"form-label"},[Object(a["createTextVNode"])("收件人姓名"),Object(a["createElementVNode"])("span",{class:"form-note"},"*")],-1),k={class:"mb-3"},C=Object(a["createElementVNode"])("label",{for:"tel",class:"form-label"},[Object(a["createTextVNode"])("收件人電話"),Object(a["createElementVNode"])("span",{class:"form-note"},"*")],-1),D={class:"mb-3"},S=Object(a["createElementVNode"])("label",{for:"address",class:"form-label"},[Object(a["createTextVNode"])("收件人地址"),Object(a["createElementVNode"])("span",{class:"form-note"},"*")],-1),T={class:"mb-3"},B=Object(a["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),L={class:"text-end"},$=["disabled"];function _(e,t,c,_,A,U){var z=Object(a["resolveComponent"])("Loading"),F=Object(a["resolveComponent"])("Field"),I=Object(a["resolveComponent"])("ErrorMessage"),M=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(z,{active:A.isLoading,"z-index":1060},null,8,["active"]),o,Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",l,[s,Object(a["createElementVNode"])("table",i,[d,Object(a["createElementVNode"])("tbody",null,[A.cartData.carts?(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(A.cartData.carts,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t.id},[Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",{class:"order-info-product-img",style:Object(a["normalizeStyle"])({backgroundImage:"url(".concat(t.product.imageUrl,")")})},null,4)]),Object(a["createElementVNode"])("td",u,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.product.title),1),m,Object(a["createElementVNode"])("small",null,"數量 "+Object(a["toDisplayString"])(t.qty)+" 隻",1)]),Object(a["createElementVNode"])("td",b,Object(a["toDisplayString"])(e.$filters.currency(t.product.price))+" 元 ",1)])})),128)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("tfoot",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",f," 總計 "+Object(a["toDisplayString"])(e.$filters.currency(A.cartData.total))+" 元 ",1)]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",p,[Object(a["createElementVNode"])("div",O,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return A.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[a["vModelText"],A.coupon_code]]),Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("button",{class:"btn add-btn",type:"button",disabled:A.isDiscount,onClick:t[1]||(t[1]=function(){return U.addCouponCode&&U.addCouponCode.apply(U,arguments)})}," 套用優惠碼 ",8,h)])])])]),A.cartData.final_total!==A.cartData.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",v,[Object(a["createElementVNode"])("td",V," 優惠後總金額 "+Object(a["toDisplayString"])(e.$filters.currency(A.cartData.final_total))+" 元 ",1)])):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createElementVNode"])("div",N,[E,Object(a["createVNode"])(M,{ref:"form",onSubmit:U.submitOrders},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createElementVNode"])("div",g,[x,Object(a["createVNode"])(F,{id:"email",name:"email",type:"email",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["email"]}]),rules:"email|required",placeholder:"請輸入 Email",modelValue:A.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return A.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(I,{name:"email",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",y,[w,Object(a["createVNode"])(F,{id:"name",name:"姓名",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:A.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return A.form.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(I,{name:"姓名",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",k,[C,Object(a["createVNode"])(F,{id:"tel",name:"電話",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["電話"]}]),rules:U.isPhone,placeholder:"請輸入電話",modelValue:A.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return A.form.user.tel=e})},null,8,["rules","class","modelValue"]),Object(a["createVNode"])(I,{name:"電話",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",D,[S,Object(a["createVNode"])(F,{id:"address",name:"地址",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:A.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return A.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(I,{name:"地址",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",T,[B,Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[6]||(t[6]=function(e){return A.form.message=e})},null,512),[[a["vModelText"],A.form.message]])]),Object(a["createElementVNode"])("div",L,[Object(a["createElementVNode"])("button",{type:"submit",class:"btn btn-lg w-100 add-btn",onSubmit:t[7]||(t[7]=function(){return U.submitOrders&&U.submitOrders.apply(U,arguments)}),disabled:Object.keys(c).length>0}," 送出訂單 ",40,$)])]})),_:1},8,["onSubmit"])])])])],64)}c("ac1f"),c("00b4"),c("99af");var A=c("6be2"),U={data:function(){return{cartData:{},isLoadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon_code:"truelove2022",isDiscount:!1,isLoading:!1}},watch:{"cartData.total":function(){this.cartData.total===this.cartData.final_total?this.isDiscount=!1:(this.isDiscount=!0,this.coupon_code="已經輸入過優惠碼")}},methods:{isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/cart");this.$http.get(t).then((function(t){e.cartData=t.data.data,e.isLoading=!1})).catch((function(e){alert(e.message)}))},submitOrders:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/order"),c=this.form;this.$http.post(t,{data:c}).then((function(t){e.showAlert({icon:"success",title:"".concat(t.data.message),showConfirmButton:!1,timer:1500}),e.isLoadingItem="",e.getCart(),e.$refs.form.resetForm(),e.form.message="",A["a"].emit("get-cart"),e.$router.push("/checkout/".concat(t.data.orderId))})).catch((function(e){alert(e.message)}))},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:c}).then((function(t){e.getCart(),e.showAlert({icon:"success",title:"".concat(t.data.message),showConfirmButton:!1,timer:1500}),e.coupon_code="",e.isDiscount=!0,e.isLoading=!1})).catch((function(){e.isLoading=!1,e.showAlert({icon:"error",title:"您輸入無效的優惠碼！"})}))},showAlert:function(e){this.$swal(e)}},mounted:function(){this.getCart(),window.scroll(0,0)}},z=c("d959"),F=c.n(z);const I=F()(U,[["render",_]]);t["default"]=I},"1dde":function(e,t,c){var a=c("d039"),o=c("b622"),n=c("2d00"),r=o("species");e.exports=function(e){return n>=51||!a((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,c){var a=c("0b42");e.exports=function(e,t){return new(a(e))(0===t?0:t)}},"6be2":function(e,t,c){"use strict";var a=function(e){return{all:e=e||new Map,on:function(t,c){var a=e.get(t);a?a.push(c):e.set(t,[c])},off:function(t,c){var a=e.get(t);a&&(c?a.splice(a.indexOf(c)>>>0,1):e.set(t,[]))},emit:function(t,c){var a=e.get(t);a&&a.slice().map((function(e){e(c)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,c)}))}}},o=a();t["a"]=o},8418:function(e,t,c){"use strict";var a=c("a04b"),o=c("9bf2"),n=c("5c6c");e.exports=function(e,t,c){var r=a(t);r in e?o.f(e,r,n(0,c)):e[r]=c}},"99af":function(e,t,c){"use strict";var a=c("23e7"),o=c("da84"),n=c("d039"),r=c("e8b5"),l=c("861d"),s=c("7b0b"),i=c("07fa"),d=c("8418"),u=c("65f0"),m=c("1dde"),b=c("b622"),f=c("2d00"),p=b("isConcatSpreadable"),O=9007199254740991,j="Maximum allowed index exceeded",h=o.TypeError,v=f>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),V=m("concat"),N=function(e){if(!l(e))return!1;var t=e[p];return void 0!==t?!!t:r(e)},E=!v||!V;a({target:"Array",proto:!0,forced:E},{concat:function(e){var t,c,a,o,n,r=s(this),l=u(r,0),m=0;for(t=-1,a=arguments.length;t<a;t++)if(n=-1===t?r:arguments[t],N(n)){if(o=i(n),m+o>O)throw h(j);for(c=0;c<o;c++,m++)c in n&&d(l,m,n[c])}else{if(m>=O)throw h(j);d(l,m++,n)}return l.length=m,l}})},b0c0:function(e,t,c){var a=c("83ab"),o=c("5e77").EXISTS,n=c("e330"),r=c("9bf2").f,l=Function.prototype,s=n(l.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=n(i.exec),u="name";a&&!o&&r(l,u,{configurable:!0,get:function(){try{return d(i,s(this))[1]}catch(e){return""}}})},b64b:function(e,t,c){var a=c("23e7"),o=c("7b0b"),n=c("df75"),r=c("d039"),l=r((function(){n(1)}));a({target:"Object",stat:!0,forced:l},{keys:function(e){return n(o(e))}})},e8b5:function(e,t,c){var a=c("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}}}]);
//# sourceMappingURL=chunk-ed03099c.bf0e13f8.js.map
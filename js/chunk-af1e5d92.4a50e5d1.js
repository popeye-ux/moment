(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af1e5d92"],{"0b42":function(t,e,c){var n=c("da84"),a=c("e8b5"),r=c("68ee"),o=c("861d"),i=c("b622"),l=i("species"),s=n.Array;t.exports=function(t){var e;return a(t)&&(e=t.constructor,r(e)&&(e===s||a(e.prototype))?e=void 0:o(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?s:e}},"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),r=c("2d00"),o=a("species");t.exports=function(t){return r>=51||!n((function(){var e=[],c=e.constructor={};return c[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},"6be2":function(t,e,c){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,c){var n=t.get(e);n?n.push(c):t.set(e,[c])},off:function(e,c){var n=t.get(e);n&&(c?n.splice(n.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var n=t.get(e);n&&n.slice().map((function(t){t(c)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,c)}))}}},a=n();e["a"]=a},8418:function(t,e,c){"use strict";var n=c("a04b"),a=c("9bf2"),r=c("5c6c");t.exports=function(t,e,c){var o=n(e);o in t?a.f(t,o,r(0,c)):t[o]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("da84"),r=c("d039"),o=c("e8b5"),i=c("861d"),l=c("7b0b"),s=c("07fa"),d=c("8418"),u=c("65f0"),b=c("1dde"),m=c("b622"),f=c("2d00"),p=m("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",j=a.TypeError,O=f>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),v=b("concat"),V=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},N=!O||!v;n({target:"Array",proto:!0,forced:N},{concat:function(t){var e,c,n,a,r,o=l(this),i=u(o,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(r=-1===e?o:arguments[e],V(r)){if(a=s(r),b+a>h)throw j(g);for(c=0;c<a;c++,b++)c in r&&d(i,b,r[c])}else{if(b>=h)throw j(g);d(i,b++,r)}return i.length=b,i}})},cc55:function(t,e,c){"use strict";c.r(e);c("99af");var n=c("7a23"),a=Object(n["createElementVNode"])("div",{class:"container-fluid mt-3 p-0"},[Object(n["createElementVNode"])("div",{class:"headPic-cart headPic-all d-flex align-items-center justify-content-center"},[Object(n["createElementVNode"])("span",{class:"head-title"},"Cart")])],-1),r={class:"container mb-7"},o={class:"text-end pt-5"},i=["disabled"],l={class:"table-responsive"},s={class:"table align-middle mt-3 cart-table"},d=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{class:"text-start cart-name"},"產品名稱"),Object(n["createElementVNode"])("th",{class:"text-center cart-num"},"數量"),Object(n["createElementVNode"])("th",{class:"text-end cart-del"},"刪除")])],-1),u={class:"text-start"},b={class:"d-flex-column d-sm-flex justify-content-start align-items-center cart-name-pict"},m={class:"text-center"},f=Object(n["createElementVNode"])("br",null,null,-1),p={class:"input-group input-group-sm text-center d-flex-row mt-2"},h={class:"input-group mb-3"},g=["onUpdate:modelValue","onChange","disabled"],j=["value"],O={class:"text-end cart-end"},v=["onClick"],V=Object(n["createElementVNode"])("i",{class:"bi bi-trash"},null,-1),N=[V],E={colspan:"6",class:"text-end text-danger fw-bolder pt-3"},y={class:"fw-bolder"},x=Object(n["createElementVNode"])("td",null,null,-1),w={class:"d-flex justify-content-between"},C=Object(n["createTextVNode"])("繼續選購"),k=Object(n["createTextVNode"])("下一步");function L(t,e,c,V,L,D){var I=Object(n["resolveComponent"])("Loading"),A=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(I,{active:L.isLoading,"z-index":1060},null,8,["active"]),a,Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("button",{class:"btn btn-outline-danger",type:"button",disabled:0===L.cartData.carts.length,onClick:e[0]||(e[0]=function(){return D.cleanAllCart&&D.cleanAllCart.apply(D,arguments)})}," 清空購物車 ",8,i)]),Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("table",s,[d,Object(n["createElementVNode"])("tbody",null,[L.cartData.carts.length?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(L.cartData.carts,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",u,[Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("div",{class:"d-sm-block cart-product-img",style:Object(n["normalizeStyle"])({backgroundImage:"url(".concat(e.product.imageUrl,")")})},null,4),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.product.title),1)])]),Object(n["createElementVNode"])("td",m,[Object(n["createElementVNode"])("small",null,"單價 "+Object(n["toDisplayString"])(t.$filters.currency(e.product.price))+"元",1),f,Object(n["createElementVNode"])("b",null,"合計 "+Object(n["toDisplayString"])(t.$filters.currency(e.total))+"元",1),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",h,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{name:"",id:"",class:"form-select cart-select","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return D.updateCartItem(e)},disabled:L.isLoadingItem===e.id,width:"100px"},[(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(20,(function(t){return Object(n["createElementVNode"])("option",{value:t,key:"".concat(t).concat(e.id)},Object(n["toDisplayString"])(t),9,j)})),64))],40,g),[[n["vModelSelect"],e.qty]])])])]),Object(n["createElementVNode"])("td",O,[Object(n["createElementVNode"])("button",{type:"button",class:"btn text-danger fs-4",onClick:function(t){return D.removeCartItem(e.id)}},N,8,v)])])})),128)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("tfoot",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("td",E,[Object(n["createElementVNode"])("h3",y," 總價 "+Object(n["toDisplayString"])(t.$filters.currency(L.cartData.total))+"元 ",1)]),x])])])]),Object(n["createElementVNode"])("div",w,[Object(n["createVNode"])(A,{to:"/products",class:"btn more-btn btn-lg mt-3 fw-bolder"},{default:Object(n["withCtx"])((function(){return[C]})),_:1}),Object(n["createVNode"])(A,{to:"/orderinform",class:Object(n["normalizeClass"])(["btn add-btn btn-lg mt-3 fw-bolder",{disabled:0===L.cartData.carts.length}])},{default:Object(n["withCtx"])((function(){return[k]})),_:1},8,["class"])])])],64)}c("d3b7");var D=c("6be2"),I={data:function(){return{cartData:{carts:[]},isLoadingItem:"",isLoading:!1,originPriceTotal:0}},methods:{getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/cart");this.$http.get(e).then((function(e){t.cartData=e.data.data;var c=t.cartData.carts,n=c.reduce((function(t,e){return t+parseInt(e.product.origin_price)*parseInt(e.qty)}),0);t.originalPriceTotal=n,t.isLoading=!1}))},removeCartItem:function(t){var e=this;this.isLoadingItem=t;var c="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/cart/").concat(t);this.isLoadingItem="",this.$http.delete(c).then((function(t){e.showAlert({icon:"success",title:"".concat(t.data.message),showConfirmButton:!1,timer:1500}),D["a"].emit("get-cart"),e.getCart()})).catch((function(t){e.showAlert({icon:"error",title:"".concat(t.message)})}))},updateCartItem:function(t){var e=this,c={product_id:t.id,qty:t.qty};this.isLoadingItem=t.id;var n="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/cart/").concat(t.id);this.$http.put(n,{data:c}).then((function(t){e.getCart(),D["a"].emit("get-cart"),e.showAlert({icon:"success",title:"".concat(t.data.message),showConfirmButton:!1,timer:1500}),e.isLoadingItem=""})).catch((function(t){e.showAlert({icon:"error",title:"".concat(t.message)}),e.isLoadingItem=""}))},cleanAllCart:function(){var t=this;this.$swal({icon:"question",title:"確認刪除購物車?",showConfirmButton:!0,showCancelButton:!0}).then((function(e){if(e.isConfirmed){t.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/carts");t.$http.delete(c).then((function(){t.getCart(),D["a"].emit("get-cart"),t.isLoading=!1})).catch((function(t){alert(t.data.message)}))}}))},showAlert:function(t){this.$swal(t)}},mounted:function(){this.getCart(),window.scroll(0,0)}},A=c("d959"),B=c.n(A);const $=B()(I,[["render",L]]);e["default"]=$},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-af1e5d92.4a50e5d1.js.map